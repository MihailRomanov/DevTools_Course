# Задача 02. MSBuild

## Общая постановка
Данная задача является продолжением предыдущей [Задача 01. NuGet](./task_01_nuget.md), в которой мы добавляли публикацию пакета NuGet.
В этой задаче мы расширим сборку и напишем MSBuild-скрипт, который мог бы использоваться для подготовки передачи нашей работы условному заказчику.
Конкретно, добавим:
- генерацию документации из исходников
- скрипт подготовки поставки, который будет позволять:
    - собрать документацию и NuGet-пакет
    - запустить модульные тесты
    - собирать zip-файл, в который будет включать в себя 
        - собранный ранее NuGet-пакет
        - документацию
        - исходные файлы

Сам скрипт должен быть выложен в корне solution и называться **create_delivery_package.build**

## Детальные требования

### Генерация документации
Для генерации документации можно использовать [Sandcastle Help File Builder (SHFB)](https://github.com/EWSoftware/SHFB) (там можно скачать установщик) или [DocFX](https://dotnet.github.io/docfx/).

Если будет использоваться SHFB, то документация должна быть собрана в виде chm-файла. Поэтому, дополнительно потребуется установить **Microsoft HTML Help Workshop**. К сожалению, на сайте MS он более не доступен для скачивания, поэтому придется его найти на сторонних площадках. Например, [тут](https://www.helpandmanual.com/downloads_mscomp.html).
Кроме того, этот вариант (сборка .chm) доступен, если выбран стиль представления VS2013. 


### Подготовка поставки заказчику
Поставка представляет собой .zip-файл, в имени которого фигурирует дата сборки и номер build’а.

В самом архиве находятся:
- NuGet-пакет (результат компиляции)
- Файл(ы) документации. 
    - в формате .chm (если собирали SHFB) 
    - файлы сайта (если DocFX)
- Исходный код продукта (все проекты, но без артефактов компиляции!!!) 

Задача заключается в разработке MSBuild-скрипта для автоматической сборки поставки. Скрипт должен:
- Вести счетчик версии сборки (последняя цифра в номере build’а). 

*Можете использовать любой вариант. Допустим вариант, когда счетчик верен при условии сборки на одном компьютере (т.е., например, не будет автоматом сохраняться в репозиторий)*

- Запускать перекомпиляцию нужных проектов (именно полную пересборку)
- Выполнять модульные тесты
- Собирать документацию
- Собирать в единый .zip-файл все артефакты процесса сборки. Внутри архива должна быть директория примерно следующей структуры:
    - Product_20121205_01.04.567
        - bin – собранный продукт
        - doc – документация
        - src – исходный код

Скрипт должен принимать на вход опции, которые определяют (если они не указаны - используются значения по умолчанию):
- Будет собираться Debug/Release вариант
- Нужно ли включать исходный код в файл поставки
- Нужно ли прерывать сборку, если тесты не прошли